<!--
 - @author aidan@nebulaconsulting.co.uk
 - @date 08/12/2021
 - @description Property editor for using FlowMap.get() in Flow Builder
 -->

<!-- Flow Map Editor -->
<template>
    <div class="slds-m-bottom_x-small">
        <h2 class="slds-text-heading_medium slds-p-around_xx-small lgc-bg-inverse">
            Input Value to Map
        </h2>

        <div class="slds-p-around_xx-small lgc-bg">
            <lightning-input
                    type="text"
                    label="Input Value"
                    placeholder="Enter a variable to map..."
                    value={thisKey}
                    onchange={handleThisKeyChange}
                    required="true"
            >
            </lightning-input>
        </div>
    </div>

    <div class="slds-m-bottom_x-small">
        <h2 class="slds-text-heading_medium slds-p-around_xx-small lgc-bg-inverse">
            Mapping Table
        </h2>

        <lightning-datatable
                key-field="id"
                data={keyValuePairs}
                draft-values={draftValues}
                columns={columns}
                hide-checkbox-column="true"
                show-row-number-column="false"
                onsave={handleTableSave}
                default-sort-direction={defaultSortDirection}
                sorted-direction={sortDirection}
                sorted-by={sortedBy}
                onsort={handleSort}
                onrowaction={handleRowAction}
        ></lightning-datatable>
        <div class="slds-text-color_error">{errorMessage}</div>

        <lightning-button icon-name="utility-add" label="Add Key/Value Pair" onclick={addKeyValuePair}>
        </lightning-button>

    </div>

</template>